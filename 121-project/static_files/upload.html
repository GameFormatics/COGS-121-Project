 <!DOCTYPE html>
<html>
<head>
    <title>Choose/Upload</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Login</title>
    <link href="https://fonts.googleapis.com/css?family=Averia+Sans+Libre|Nunito" rel="stylesheet">
    <style type="text/css">
        @import url("primaryCSS.css");
    </style>
</head>

<body>
    <h1>Choose a Game</h1>
    <a href="https://www.epicgames.com/fortnite"><button>Fortnite</button></a>
    <a href="https://na.leagueoflegends.com/en/"><button>League of Legends</button></a>
    <a href="https://playoverwatch.com/"><button>Overwatch</button></a>
    <form class="fileupload" action="upload" method="post" enctype="multipart/form-data">
      <h1>Upload Audio Here</h1>
      <input type="file" name="upfile" value="">
      <input type="submit" />
    </form>
    <h1>Type what you said</h1>
    <input id="typeTextBox" type="text" size="20"/>
    <button id="typeTextButton">Analyze Text</button>
    <button id="getTextButton">Get Text</button>
    <br></br>
    <div id="status"></div>
    <div id="results"></div>
    <!-- <a href="results.html"><button id="typeTextButton">Analyze Text</button></a> -->
    <a href="home.html"><button>Return to Home Page></button></a>
    </p>
</body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="application/javascript" src="js_files/quizQuestions.js"></script>
<script type="text/javascript">
    $(document).ready(() => {
        $('#getTextButton').click(() => {
            $.ajax({
              url: 'text',
              type: 'GET',
              dataType : 'json',
              success: (data) => {
                console.log('You received some data!', data);
                $('#status').empty();
                $('#results').empty();
                for(let key in data.keywords[0]){
                      $('#results').append('<div class="key"><h1>' + key +'</h1></div>');
                      if(key == "text"){
                        $('#results').append('<div class="data"><h4>' + data.keywords[0].text +'</h4></div>');
                      }
                      if(key == "relevance"){
                        $('#results').append('<div class="data"><h4>' + data.keywords[0].relevance +'</h4></div>');
                      }
                      if(key == "sentiment"){
                        $('#results').append('<div class="data"><h4>' + 'Score: ' + data.keywords[0].sentiment.score +'</h4></div>');
                          $('#results').append('<div class="data"><h4>' + 'Label: ' + data.keywords[0].sentiment.label +'</h4></div>');
                      }
                      if(key == "emotion"){
                          $('#results').append('<div class="data"><h4>' + 'Sadness: ' + data.keywords[0].emotion.sadness +'</h4></div>');
                            $('#results').append('<div class="data"><h4>' + 'Joy: ' + data.keywords[0].emotion.joy +'</h4></div>');
                              $('#results').append('<div class="data"><h4>' + 'Disgust: ' + data.keywords[0].emotion.disgust +'</h4></div>');
                                $('#results').append('<div class="data"><h4>' + 'Fear: ' + data.keywords[0].emotion.fear +'</h4></div>');
                                  $('#results').append('<div class="data"><h4>' + 'Anger: ' + data.keywords[0].emotion.anger +'</h4></div>');
                                }
                  }
                // $('#status').empty();
                // $('#results').empty();
                // let wordSize = data.keywords.length;
                // for (let i = 0; i < wordSize; i++) {
                //     for(let key in data.keywords[i]){
                //           $('#results').append('<div class="key" id="key"><h1>'+ key +'</h1></div>');
                //           if(key == "text"){
                //             $('#results').append('<h4>' + data.keywords[i].text +'</h4>');
                //           }
                //           if(key == "relevance"){
                //             $('#results').append('<h4>' + data.keywords[i].relevance +'</h4>');
                //           }
                //           if(key == "sentiment"){
                //             $('#results').append('<h4>Score: ' + data.keywords[i].sentiment.score +'</h4>');
                //               $('#results').append('<h4>Label: ' + data.keywords[i].sentiment.label +'</h4>');
                //           }
                //           if(key == "emotion"){
                //               $('#results').append('<h4>Sadness: ' + data.keywords[i].emotion.sadness +'</h4>');
                //                 $('#results').append('<h4>Joy: ' + data.keywords[i].emotion.joy +'</h4>');
                //                   $('#results').append('<h4>Disgust: ' + data.keywords[i].emotion.disgust +'</h4>');
                //                     $('#results').append('<h4>Fear: ' + data.keywords[i].emotion.fear +'</h4>');
                //                       $('#results').append('<h4>Anger: ' + data.keywords[i].emotion.anger +'</h4>');
                //                     }
                //       }
                //}
              //},
            }
          })
        });

        $('#typeTextButton').click(() => {
            $.ajax({
              // all URLs are relative to http://localhost:3000/
              url: 'text',
              type: 'POST', // <-- this is POST, not GET
              data: {
                      words: $('#typeTextBox').val(),
                    },
              error: function(){
                console.log('Failed to submit text.');
                $('#status').html('Failed to submit text. Please try again.');
              },
              success: (data) => {
                console.log('Successfully submitted text!');
                $('#status').html('Successfully submitted! Press "Get Text" to read results.');
                $('#results').empty();
              }
            });
          });

        /*Old code to get specific item - not working, will use later
        $('#getTextButton').click(() => {
            const requestURL = 'text/' + $('#typeTextBox').val();
            //const requestURL = 'text/';
            console.log('making ajax request to:', requestURL);
            // From: http://learn.jquery.com/ajax/jquery-ajax-methods/
            // Using the core $.ajax() method since it's the most flexible.
            // ($.get() and $.getJSON() are nicer convenience functions)
            $.ajax({
              // all URLs are relative to http://localhost:3000/
              url: requestURL,
              type: 'GET',
              dataType : 'json', // this URL returns data in JSON format
              success: (data) => {
                console.log('You received some data!', data);
                $('#results').html('Successfully fetched data at URL: ' + requestURL);
                $('#results').html(data.words + " " data.results);
              },
            });
          });*/
    });
</script>
</html>
