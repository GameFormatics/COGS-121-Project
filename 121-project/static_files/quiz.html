<html>
<head>
<title>Quiz</title>

<script src="js_files/jquery-3.3.1.js"></script>

<script type="text/javascript">
// jQuery convention for running when the document has been fully loaded:
$(document).ready(() => {
  $('#start').click(() => {
    let random = Math.floor((Math.random() * 10) + 1);
    const requestURL = 'quiz/' + random;
    console.log('making ajax request to:', requestURL);
    // From: http://learn.jquery.com/ajax/jquery-ajax-methods/
    // Using the core $.ajax() method since it's the most flexible.
    // ($.get() and $.getJSON() are nicer convenience functions)
    $.ajax({
      // all URLs are relative to http://localhost:3000/
      url: requestURL,
      type: 'GET',
      dataType : 'json', // this URL returns data in JSON format
      success: (data) => {
        console.log('You received some data!', data);
        if (data.number && data.content) {
            $('#status').html('Successfully fetched data at URL: ' + requestURL);
            $('#number').html('Question Number: ' + data.number);
            $('#question').html('This question is about: ' + data.content);
        } else {
              $('#status').html('Error: could not find user at URL: ' + requestURL);
              // clear the display
              $('#jobDiv').html('');
        }
      }
    });
  });
  // define a generic Ajax error handler:
  // http://api.jquery.com/ajaxerror/
  $(document).ajaxError(() => {
    $('#status').html('Error: unknown ajaxError!');
  });
});
</script>

</head>

<body>
    <h1>This will be a test page for quiz functionality!</h1>
    <br>
    <button id="start">Start Quiz</button><br>
    <div id="status"></div>
    <br>
    <div id="number"></div>
    <div id="question"></div>
</body>

</html>
